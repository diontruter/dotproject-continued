/*
*****************************************
*** dotProject CHANGES as of 08 July 2002
*****************************************
*/

This code begins with dotproject-0.2.1 and has Nicola Fankhauser's (nikee)
pain-relieving patch for 0.2.1 applied before making additional modifications.

The code was then modified by Adam Donnison and released as dotproject-ajd.0215.

The /includes/gateway.pl and ticketsmith module files of Jim Flowers from
dotproject-jbf-0213 were then incorporated. These changes included using a
variable $app_root to remove some hardcoding of links from gateway.pl.

The database logic changes of Leo West from module dotproject-leo.0214 
were then added.  These database upgrades were further modified by John Pritchard (JRP). Changes and additions to Leo West's modifications include:
// Consistent Field Naming
1) RENAME contacts.icon -> contacts.contact_icon, events.icon -> events.event_icon, files.icon -> files.file_icon
// Consistent VarChar Attributes
2) CHANGE contacts.contact_company varchar(30) to varchar(100)
// Increase size of contact_title field further
3) CHANGE contacts.contact_title varchar(30) to varchar(50)

Other Minor Modifications by John Pritchard include:
Update install documentation, remove extraneous files (e.g. /docs/dotproject.sql, *.php.orig, etc), modify /style/main.css so 
that button descriptions fit, review and integrate other Leo 
West files.

Other files added from Leo West (dotproject-leo.0214) include:
/functions/*, miscellaneous /images/ files, /images/obj/ folder 
and graphics, /locales/ folder, subfolder and files. 

JRP also added Axel Napolitano's "Documentation of dotproject's plug-in interface" as /docs/MODULES.txt.

-------------------------------------------------------------------------------
Updates by Andrew Eddie 7 August 2002

color_selector.php
- added drop-down list for preset colours

logincheck.php
- add user_full_name cookie

dosql/addedittask.php
- added nofity support and style block to mail
- changed mail 'From' to default to the task owner

functions/calendar_func.php
- added support for filter by company

includes/create_new_menu.php
- added support to auto-populate the task parent of a new task

includes/header.php
- added current user display (could be removed later)
- added link to about page

modules/admin/index.php
- added link on login name to view user action

modules/admin/addedituser.php
- change title and add breadcrumbs

modules/admin/viewuser.php
- new page

modules/calendar/index.php
- added filter by company

modules/companies/index.php
- fixed sql for project counts

modules/companies/view.php
- new page

modules/companies/addedit.php
- fixed hole in security (anyone could edit regardless of permissions)
- widen some input boxes, increased max length on state field for non-US countries

modules/forums/post_messages.php
- commented out code that made the author of any reply the same as the original message

modules/help/about.php
- new module and file

modules/projects/index.php
- added filter by company

modules/projects/addedit.php
- cleaned code layout, added delete project link and breadcrumbs

modules/projects/dosql.php
- clean code layout and added delete project support

modules/tasks/index.php
- major re-work to show child tasks assigned to individual users
- fixed missing closing form tag

modules/tasks/addedit.php
- added code to auto-populate taks parent

-------------------------------------------------------------------------------
Update by Andrew Eddie 11 August 2002
This update includes a reqork of the security model. Security is loaded once in
includes/permissions.php rather than also in any subsequent module. This
provides a much more portable method of determining module level permissions
and cut down on multiple calls to the permissions table.
Companies and Contacts have been included as test modules in this update. Other
modules will be included when thoroughly tested.
Caveat: this method does not check for the case of deny-all as this is the
assumed default condition.

index.php
- formatting changes

dosql/aed_post.php
- encode html special characters in message field

includes/login.php
- added draft logo/brand

includes/permissions.php
- rework permissions model (all user permissions loaded itno an array for use 
  by leftnav and module)

includes/leftnav.php
- rework permissions

modules/admin/permissions
- fixed bug when editting individual permission (module and item not properly 
  selected)

modules/admin/dosql.php
- encode html special characters in message field
- update security model for return page

modules/companies/index.php
- rework permissions

modules/companies/view.php
- rework permissions

modules/companies/addedit.php
- rework permissions

modules/help/access_denied.php
- new page (and denied permissions bounce to this page)

modules/tasks/view.php
- top align comment cell

modules/contacts/index.php
- optimise code
- rework $showfield array handling
- add permissions

modules/contacts/addedit.php
- add permissions

-------------------------------------------------------------------------------
Update by Andrew Eddie 16 August 2002
Extended permissions to forums and files

./logincheck.php
- added parsing for master cookie

includes/permissions.php
- logic fix for super user viewing a module
- added a master cookie

includes/header.php
- alter user name based on master cookie

includes/leftnav.php
- couldn't see a read-only forums module

modules/projects/index.php
- set company filter to default to user company

modules/forums/index.php
modules/forums/viewer.php
- added permissions and disabled search buttons

modules/forums/view_topics.php
modules/forums/view_messages.php
- added permissions

modules/files/index.php
- added permissions, filter list box for projects and disabled search buttons

modules/files/addedit.php
- added permissions and breadcrumbs
- made delete handling mor consistent with other modules

-------------------------------------------------------------------------------
Update by Andrew Eddie 24 August 2002
Extended permissions to projects, and a couple of bug fixes

function/projects_func.php
- deleted unused class
- added common projects constants

includes/permissions.php
- deleted deprecated code

includes/main_functions.php
- added color selection function
- deleted unused getPerms function
- added select box function (create from array)

modules/admin/permissions.php
- added confirm delete function

modules/projects/index.php
- added permissions, fixed 'my tasks' count
- corrected % complete calculation
- modularised text color selection on project color background

modules/projects/view.php
- added permissions
- many bug fixes in code and sql, corrected % complete calculation
- cut mini-tables into separate files to improve readability and manageabiliy

modules/projects/vw_forums.php
modules/projects/vw_tasks.php
- new files for mini-tables in projects view action

modules/projects/addedit.php
- added permissions and optimised date selector code

modules/files/index.php
modules/forums/index.php
- updated text color selection on project color background

-------------------------------------------------------------------------------
Update by Andrew Eddie 25 August 2002
Extended permissions to tasks

./index.php
- delete assignment of cookie_project (redundant)

function/tasks_func.php
- added constant, deleted unsed class (these can be replaced later but they do
  not really form part of the current code base)

modules/files/addedit.php
- fixed project selection from attach file link in view task

modules/tasks/index.php
modules/tasks/view.php
modules/tasks/addedit.php
- added permissions and tidied up code

-------------------------------------------------------------------------------
